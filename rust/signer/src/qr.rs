//! # Qr code parser
//!
//! These functions implement fountain bucket for fountained data
//!
//! Currently only metadata is wrapped, but these functions are
//! agnostic for the payload, so expancion should be trivial if needed

use raptorq;
use std::str;
use hex;

/// RN-generated string deserializer
pub fn deserialize(data_string: &str) -> Vec<&str> {
    data_string.split(",").collect()
}

/// QR data decoding bucket, returns decoded payload when done
pub fn parse_goblet(size: u64, chunk_size: u16, data: Vec<&str>) -> String {
    let mut decoder = raptorq::Decoder::new(
        raptorq::ObjectTransmissionInformation::with_defaults(
            size,
            chunk_size,
        ));
    
    let mut packets: Vec<raptorq::EncodingPacket> = data.iter()
        .map(|str_packet| {
                if let Ok(ser_packet) = hex::decode(str_packet) {
                    ser_packet
                } else {
                    Vec::new()
                }
            })
        .filter(|ser_packet| !ser_packet.is_empty())
        .map(|ser_packet| raptorq::EncodingPacket::deserialize(&ser_packet))
        .collect();

    let mut result = None;
    while !packets.is_empty() {
        result = decoder.decode(packets.pop().unwrap());
        if result != None {
            break;
        }
    }

    if let Some(decoded) = result {
        hex::encode(decoded)
    } else { "".to_string() }
    
}


#[cfg(test)]
mod tests {

    use super::*;

    static CHUNK_SIZE: u16 = 1076;

    static TEST_INPUT: &str = 
        "00000001284576656e74436f756e740100284576656e74496e646578100000000004b820546865206e756d626572206f66206576656e747320696e2074686520604576656e74733c543e60206c6973742e2c4576656e74546f706963730101021c543a3a48617368845665633c28543a3a426c6f636b4e756d6265722c204576656e74496e646578293e000400282501204d617070696e67206265747765656e206120746f7069632028726570726573656e74656420627920543a3a486173682920616e64206120766563746f72206f6620696e646578657394206f66206576656e747320696e2074686520603c4576656e74733c543e3e60206c6973742e00510120416c6c20746f70696320766563746f727320686176652064657465726d696e69737469632073746f72616765206c6f636174696f6e7320646570656e64696e67206f6e2074686520746f7069632e2054686973450120616c6c6f7773206c696768742d636c69656e747320746f206c6576657261676520746865206368616e67657320747269652073746f7261676520747261636b696e67206d656368616e69736d20616e64e420696e2063617365206f66206368616e67657320666574636820746865206c697374206f66206576656e7473206f6620696e7465726573742e004d01205468652076616c756520686173207468652074797065206028543a3a426c6f636b4e756d6265722c204576656e74496e646578296020626563617573652069662077652075736564206f6e6c79206a7573744d012074686520604576656e74496e64657860207468656e20696e20636173652069662074686520746f70696320686173207468652073616d6520636f6e74656e7473206f6e20746865206e65787420626c6f636b0101206e6f206e6f74696669636174696f6e2077696c6c20626520747269676765726564207468757320746865206576656e74206d69676874206265206c6f73742e484c61737452756e74696d65557067726164650000584c61737452756e74696d6555706772616465496e666f04000455012053746f726573207468652060737065635f76657273696f6e6020616e642060737065635f6e616d6560206f66207768656e20746865206c6173742072756e74696d6520757067726164652068617070656e65642e545570677261646564546f553332526566436f756e74010010626f6f6c0400044d012054727565206966207765206861766520757067726164656420736f207468617420607479706520526566436f756e74602069732060753332602e2046616c7365202864656661756c7429206966206e6f742e585570677261646564546f4475616c526566436f756e74010010626f6f6c04000855012054727565206966207765206861766520757067726164656420736f2074686174204163636f756e74496e666f20636f6e7461696e732074776f207479706573206f66206052,0000000a0257455739fdc5fd20d93f26947938fde6bc188e9a51ab237c7fabed4ab617d3ecad0ab084e17cfe5bcdddcdcb2c23b5e582fd0f13f9d4abf6a507424862753e5588ecb0d51d8c79a2b1eeb5231f01b6348cc744cd3bd163a8476f5c7c18e73cb4bde530de4662af33f2d297254c05df6158cce86d25246834ca79f7f0f4be55876709d8f8711445473bb697aee6beb2d8d271cbed7b8b14b5018b7141514dc18d3273d8a387ec6327db5d88c7d9c4727ea863756bda542b5bacb5292eaaf851dbb7488ead6d143be7d9ef91da059420f7f7688daf2fe38e4e3a9db0779c277196ba30594a4082867f177e43f5362bc333c6a534bef49f7e3a0c62a9800312b285b50fda20e370edc5a9cddf2e5cd353e444f10eb864553f2ae4683e96905ec61aa1d733c8a78b0d4649af6ac33d904cc0ba77c2f575001c5583ea4fc7deacc891a404fb9958a628a8434cf00fb69c47cbd22257a5fb9d15fafd680b2be280730924d9c695676dbceca0b665891b25e8ae8ebf362d935d52d6eeb81c9a2f230cb5b8a387b8034966a87f59cd4e04a9dc11f5ac15db5f1faf07895e41dcc91b3a940c0727d7e730c4b9f6e8d8cfacd8b26bbe4a386a22ffcf3ab89aa9b5f3b57cad6c377c737f2a0bcd1ad0a84c44cdea20f856d6fa2bb9cef148ac75190532a05da15d96acffe57e8576c43e45fcce2167ab8ae9ce175d7dcbe3573afafadaafee630ffa7f78377bf6fdd9e90795a4c2c4f01ffdc02b5fa96c6db0a63e37ec2206f92efff5f1ca81fec2808d20012c19edaaf55bed5f58d08dcf2c9b7cc06996c9e5c74205d8a8032b0fe99980befc2ae5cd9cfdf8af279592fd9636430de8153983dc4b72214907fa11931cdf59047c4ecd4eea635371ccd9cbf3c6db8829f58201c44650c75537ca91975ee4d1f0ba2656201b4ad149ce6e24402799114a6ff9e2af2465d0f48b886d90c9d1632b71e4d3abce7324b9cedd9e24a83d8651b4a534f9ac56bb34534d7c3a3d6285019cad393f45f225c220b758e117ba6a72b15ff0a95434a418c333e855304ca81e5ce2b48931b77af0d2a5eb3d15c4013568db0297e9eaef0b20a60755b880f2190a11538694ffc3ed6ef2638f66630d289099a4489987fd1c814fc67174b982dbe4160d4d0d0839a84560c5a3e90c4e639edabfca23a74674d355aa7b038aa62c1da36f1f0bc41c06174e1aad094429d7731d16edc1cc0901d580a2dc6e2ec4b9f998dc59131f1d859024c55f546d2a9fed71e252ec9efffa8f617c795822042179fc79fa5dad052f9baca4ea2bb273ea45b8e48fce22bfeacbbdd639798385b520550ed3f4b24e0c0b527cbb03135af2eabdb0e92f7f2da8ef15263c9b186370d2d10b4fe8958ed41940e1733ad40c911bec972d16f513c60f975454a5c5ac5e3ff2a4b796386efbe309004846f042f67fb8137a75d29558e7b6b3b402f3815fdb1312db5d36c60a8fcce357fbd365b0ca5bbfb25ef3df78a6650beccff0b80d36,0000000cabcbf6ebd62f42b49dc1b458bc296106cb0800c2201329971042cbe99f32fb7367a8b6fa5ef98436163324e7d167ae0307f8b54357dfae1bf01f73eca7f4efcee327f57b12c8a61ad9e0131a359e8d0d7332af326400e383d6a7ec66c8e46ff079a388cbca9846fb5efed906428fb0ffcb35c24e65d5eb7e05e8dc10cc32a77dae21a2ae6d083c75ed8a8b150c7bb627b03507d0f8d1b45dffa45e2a7e04f38c23af6085b031da21354914e173375d4b4355664e5936d144513637954e1cb03c3c922f2b5f12be67bedc6dd658418bb1dfcbe1bb0d7eb56c20cfaa9f5ca6ec4b1b7f10f8bdb5a7f4ce370b4297d2a7bab642e7829fffb0195cbc1880c7a0660a8a651996325806c636732820274c6b31848f0a714ec7e5e15ce5bd0a03ccef0d7aa7b3794c0e07b59a3e82bf4b70b7aa95f48aa0ec9b4721e82ec804957d278d13aa15361707794672e36f5adf59688ac946a4d0cf8e9cac3ffb48825c04269f3619f13a56f22d2fa95ecf1de9ac7ee4ac21817c6b19316578a9d7663a803d84616391b9e56b8d05b41da17950d956a7f94372fafdac5d90d9367859405ce5cf0c7c62b1e75342f283d5e3366bd049b3d588bd03712bb8ca26a41eb1ad55cb0596168b09784880438867fc1041d0a1caa870b35a5d849b3309e0c9c99e5e07b92249b9e1323952e3163283914e7983675ea24a4fc37395b7197d3382eedadef297325d74aa4aa53cdf9223106ff07255cebef7f8ec0beed54356f708a1e0f4c8cda4975dc0fe49316e1eacd727622fa627e42496f928b94f6a8ac4c62133ef66a4c2213eb842431ab758f6568b37654f687b934e63a30152b8a50740b7a796cf92d5666b5a98a613f371ee946d44b65e817b5721b643701cb6636e7915e116ad7643189511cd0b3d7ce6d6b1df42b2f8a771cf9569285d129bbc0f218cb44bcb206992b3cde253a260bd1f69e3db30579085e7d81522a3d8dc8032ceb4160412b6982cfd49eeec3e18d9a46e84580b1c73c7c36b2610aca7010a634992f773d9943d0028618919680fd8d81438de6360257469f364fee4dd22761523a195f5b47842c8be92ef28f960179aa6b30305bec6c03fbd18f3bb9bcb817a9125df5b21dc7c6ad649ae0ede5e678a9a0e69d894a3f4a6d639728fbcdc35d4030bb51e4a42bef8946ad2a3aeef0e321bc372daecd9d49b1aa58d36b1b94197809dac968ddee2c947a55d6878d2b61f132365989b059498c791d62e3408a88c62adcb89fbeda19d548882ae06f65a8f62f93929ebd68872a3c7c1bfa58da4b54d77e335112780636444313392252ea634c515eff6958503c6d5e2851af2213cbd9171d18ef3f7f9884cbd942de2e87ce76b0d5d6a0361dfe3295e3d0bfb0a0b6aef0b97f8e8e99d44d52d720a4c00bb01cc8d958180f0310669739c33d153932a5e4b45360536ac4000b951bc4a4b153eb2b7714b948222b796323161fea3c7ec9510ac1fb428d1332f359f1819b5d2e25d53a21f,000000006d6574610c601853797374656d011853797374656d401c4163636f756e7401010230543a3a4163636f756e744964944163636f756e74496e666f3c543a3a496e6465782c20543a3a4163636f756e74446174613e0031010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004e8205468652066756c6c206163636f756e7420696e666f726d6174696f6e20666f72206120706172746963756c6172206163636f756e742049442e3845787472696e736963436f756e7400000c753332040004b820546f74616c2065787472696e7369637320636f756e7420666f72207468652063757272656e7420626c6f636b2e2c426c6f636b576569676874010038436f6e73756d6564576569676874600000000000000000000000000000000000000000000000000488205468652063757272656e742077656967687420666f722074686520626c6f636b2e40416c6c45787472696e736963734c656e00000c753332040004410120546f74616c206c656e6774682028696e2062797465732920666f7220616c6c2065787472696e736963732070757420746f6765746865722c20666f72207468652063757272656e7420626c6f636b2e24426c6f636b4861736801010538543a3a426c6f636b4e756d6265721c543a3a48617368008000000000000000000000000000000000000000000000000000000000000000000498204d6170206f6620626c6f636b206e756d6265727320746f20626c6f636b206861736865732e3445787472696e736963446174610101050c7533321c5665633c75383e000400043d012045787472696e73696373206461746120666f72207468652063757272656e7420626c6f636b20286d61707320616e2065787472696e736963277320696e64657820746f206974732064617461292e184e756d626572010038543a3a426c6f636b4e756d6265721000000000040901205468652063757272656e7420626c6f636b206e756d626572206265696e672070726f6365737365642e205365742062792060657865637574655f626c6f636b602e28506172656e744861736801001c543a3a4861736880000000000000000000000000000000000000000000000000000000000000000004702048617368206f66207468652070726576696f757320626c6f636b2e1844696765737401002c4469676573744f663c543e040004f020446967657374206f66207468652063757272656e7420626c6f636b2c20616c736f2070617274206f662074686520626c6f636b206865616465722e184576656e747301008c5665633c4576656e745265636f72643c543a3a4576656e742c20543a3a486173683e3e040004a0204576656e7473206465706f736974656420666f72207468652063757272656e7420626c6f636b2e,000000026566436f756e74602e2046616c736548202864656661756c7429206966206e6f742e38457865637574696f6e50686173650000145068617365040004882054686520657865637574696f6e207068617365206f662074686520626c6f636b2e01242866696c6c5f626c6f636b04185f726174696f1c50657262696c6c040901204120646973706174636820746861742077696c6c2066696c6c2074686520626c6f636b2077656967687420757020746f2074686520676976656e20726174696f2e1872656d61726b041c5f72656d61726b1c5665633c75383e1c6c204d616b6520736f6d65206f6e2d636861696e2072656d61726b2e002c2023203c7765696768743e24202d20604f28312960e0202d2042617365205765696768743a20302e36363520c2b5732c20696e646570656e64656e74206f662072656d61726b206c656e6774682e50202d204e6f204442206f7065726174696f6e732e302023203c2f7765696768743e387365745f686561705f7061676573041470616765730c75363420fc2053657420746865206e756d626572206f6620706167657320696e2074686520576562417373656d626c7920656e7669726f6e6d656e74277320686561702e002c2023203c7765696768743e24202d20604f283129604c202d20312073746f726167652077726974652e64202d2042617365205765696768743a20312e34303520c2b57360202d203120777269746520746f20484541505f5041474553302023203c2f7765696768743e207365745f636f64650410636f64651c5665633c75383e28682053657420746865206e65772072756e74696d6520636f64652e002c2023203c7765696768743e3501202d20604f2843202b2053296020776865726520604360206c656e677468206f662060636f64656020616e642060536020636f6d706c6578697479206f66206063616e5f7365745f636f64656088202d20312073746f726167652077726974652028636f64656320604f28432960292e7901202d20312063616c6c20746f206063616e5f7365745f636f6465603a20604f28532960202863616c6c73206073705f696f3a3a6d6973633a3a72756e74696d655f76657273696f6e6020776869636820697320657870656e73697665292e2c202d2031206576656e742e7d012054686520776569676874206f6620746869732066756e6374696f6e20697320646570656e64656e74206f6e207468652072756e74696d652c206275742067656e6572616c6c792074686973206973207665727920657870656e736976652e902057652077696c6c207472656174207468697320617320612066756c6c20626c6f636b2e302023203c2f7765696768743e5c7365745f636f64655f776974686f75745f636865636b730410636f64651c5665633c75383e201d012053657420746865206e65772072756e74696d6520636f646520776974686f757420646f696e6720";
    
    static TEST_OUTPUT: &str = 
        "6d6574610c601853797374656d011853797374656d401c4163636f756e7401010230543a3a4163636f756e744964944163636f756e74496e666f3c543a3a496e6465782c20543a3a4163636f756e74446174613e0031010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004e8205468652066756c6c206163636f756e7420696e666f726d6174696f6e20666f72206120706172746963756c6172206163636f756e742049442e3845787472696e736963436f756e7400000c753332040004b820546f74616c2065787472696e7369637320636f756e7420666f72207468652063757272656e7420626c6f636b2e2c426c6f636b576569676874010038436f6e73756d6564576569676874600000000000000000000000000000000000000000000000000488205468652063757272656e742077656967687420666f722074686520626c6f636b2e40416c6c45787472696e736963734c656e00000c753332040004410120546f74616c206c656e6774682028696e2062797465732920666f7220616c6c2065787472696e736963732070757420746f6765746865722c20666f72207468652063757272656e7420626c6f636b2e24426c6f636b4861736801010538543a3a426c6f636b4e756d6265721c543a3a48617368008000000000000000000000000000000000000000000000000000000000000000000498204d6170206f6620626c6f636b206e756d6265727320746f20626c6f636b206861736865732e3445787472696e736963446174610101050c7533321c5665633c75383e000400043d012045787472696e73696373206461746120666f72207468652063757272656e7420626c6f636b20286d61707320616e2065787472696e736963277320696e64657820746f206974732064617461292e184e756d626572010038543a3a426c6f636b4e756d6265721000000000040901205468652063757272656e7420626c6f636b206e756d626572206265696e672070726f6365737365642e205365742062792060657865637574655f626c6f636b602e28506172656e744861736801001c543a3a4861736880000000000000000000000000000000000000000000000000000000000000000004702048617368206f66207468652070726576696f757320626c6f636b2e1844696765737401002c4469676573744f663c543e040004f020446967657374206f66207468652063757272656e7420626c6f636b2c20616c736f2070617274206f662074686520626c6f636b206865616465722e184576656e747301008c5665633c4576656e745265636f72643c543a3a4576656e742c20543a3a486173683e3e040004a0204576656e7473206465706f736974656420666f72207468652063757272656e7420626c6f636b2e284576656e74436f756e740100284576656e74496e646578100000000004b820546865206e756d626572206f66206576656e747320696e2074686520604576656e74733c543e60206c6973742e2c4576656e74546f706963730101021c543a3a48617368845665633c28543a3a426c6f636b4e756d6265722c204576656e74496e646578293e000400282501204d617070696e67206265747765656e206120746f7069632028726570726573656e74656420627920543a3a486173682920616e64206120766563746f72206f6620696e646578657394206f66206576656e747320696e2074686520603c4576656e74733c543e3e60206c6973742e00510120416c6c20746f70696320766563746f727320686176652064657465726d696e69737469632073746f72616765206c6f636174696f6e7320646570656e64696e67206f6e2074686520746f7069632e2054686973450120616c6c6f7773206c696768742d636c69656e747320746f206c6576657261676520746865206368616e67657320747269652073746f7261676520747261636b696e67206d656368616e69736d20616e64e420696e2063617365206f66206368616e67657320666574636820746865206c697374206f66206576656e7473206f6620696e7465726573742e004d01205468652076616c756520686173207468652074797065206028543a3a426c6f636b4e756d6265722c204576656e74496e646578296020626563617573652069662077652075736564206f6e6c79206a7573744d012074686520604576656e74496e64657860207468656e20696e20636173652069662074686520746f70696320686173207468652073616d6520636f6e74656e7473206f6e20746865206e65787420626c6f636b0101206e6f206e6f74696669636174696f6e2077696c6c20626520747269676765726564207468757320746865206576656e74206d69676874206265206c6f73742e484c61737452756e74696d65557067726164650000584c61737452756e74696d6555706772616465496e666f04000455012053746f726573207468652060737065635f76657273696f6e6020616e642060737065635f6e616d6560206f66207768656e20746865206c6173742072756e74696d6520757067726164652068617070656e65642e545570677261646564546f553332526566436f756e74010010626f6f6c0400044d012054727565206966207765206861766520757067726164656420736f207468617420607479706520526566436f756e74602069732060753332602e2046616c7365202864656661756c7429206966206e6f742e585570677261646564546f4475616c526566436f756e74010010626f6f6c04000855012054727565206966207765206861766520757067726164656420736f2074686174204163636f756e74496e666f20636f6e7461696e732074776f207479706573206f662060526566436f756e74602e2046616c736548202864656661756c7429206966206e6f742e38457865637574696f6e50686173650000145068617365040004882054686520657865637574696f6e207068617365206f662074686520626c6f636b2e01242866696c6c5f626c6f636b04185f726174696f1c50657262696c6c040901204120646973706174636820746861742077696c6c2066696c6c2074686520626c6f636b2077656967687420757020746f2074686520676976656e20726174696f2e1872656d61726b041c5f72656d61726b1c5665633c75383e1c6c204d616b6520736f6d65206f6e2d636861696e2072656d61726b2e002c2023203c7765696768743e24202d20604f28312960e0202d2042617365205765696768743a20302e36363520c2b5732c20696e646570656e64656e74206f662072656d61726b206c656e6774682e50202d204e6f204442206f7065726174696f6e732e302023203c2f7765696768743e387365745f686561705f7061676573041470616765730c75363420fc2053657420746865206e756d626572206f6620706167657320696e2074686520576562417373656d626c7920656e7669726f6e6d656e74277320686561702e002c2023203c7765696768743e24202d20604f283129604c202d20312073746f726167652077726974652e64202d2042617365205765696768743a20312e34303520c2b57360202d203120777269746520746f20484541505f5041474553302023203c2f7765696768743e207365745f636f64650410636f64651c5665633c75383e28682053657420746865206e65772072756e74696d6520636f64652e002c2023203c7765696768743e3501202d20604f2843202b2053296020776865726520604360206c656e677468206f662060636f64656020616e642060536020636f6d706c6578697479206f66206063616e5f7365745f636f64656088202d20312073746f726167652077726974652028636f64656320604f28432960292e7901202d20312063616c6c20746f206063616e5f7365745f636f6465603a20604f28532960202863616c6c73206073705f696f3a3a6d6973633a3a72756e74696d655f76657273696f6e6020776869636820697320657870656e73697665292e2c202d2031206576656e742e7d012054686520776569676874206f6620746869732066756e6374696f6e20697320646570656e64656e74206f6e207468652072756e74696d652c206275742067656e6572616c6c792074686973206973207665727920657870656e736976652e902057652077696c6c207472656174207468697320617320612066756c6c20626c6f636b2e302023203c2f7765696768743e5c7365745f636f64655f776974686f75745f636865636b730410636f64651c5665633c75383e201d012053657420746865206e65772072756e74696d6520636f646520776974686f757420646f696e6720616e7920636865636b73206f662074686520676976656e2060636f6465602e002c2023203c7765696768743e90202d20604f2843296020776865726520604360206c656e677468206f662060636f64656088202d20312073746f726167652077726974652028636f64656320604f28432960292e2c202d2031206576656e742e75012054686520776569676874206f6620746869732066756e6374696f6e20697320646570656e64656e74206f6e207468652072756e74696d652e2057652077696c6c207472656174207468697320617320612066756c6c20626c6f636b2e302023203c2f7765696768743e5c7365745f6368616e6765735f747269655f636f6e666967044c6368616e6765735f747269655f636f6e666967804f7074696f6e3c4368616e67657354726965436f6e66696775726174696f6e3e28a02053657420746865206e6577206368616e676573207472696520636f6e66696775726174696f6e2e002c2023203c7765696768743e24202d20604f28312960b0202d20312073746f72616765207772697465206f722064656c6574652028636f64656320604f28312960292ed8202d20312063616c6c20746f20606465706f7369745f6c6f67603a20557365732060617070656e6460204150492c20736f204f28312964202d2042617365205765696768743a20372e32313820c2b57334202d204442205765696768743aa820202020202d205772697465733a204368616e67657320547269652c2053797374656d20446967657374302023203c2f7765696768743e2c7365745f73746f7261676504146974656d73345665633c4b657956616c75653e206c2053657420736f6d65206974656d73206f662073746f726167652e002c2023203c7765696768743e94202d20604f2849296020776865726520604960206c656e677468206f6620606974656d73607c202d206049602073746f72616765207772697465732028604f28312960292e74202d2042617365205765696768743a20302e353638202a206920c2b57368202d205772697465733a204e756d626572206f66206974656d73302023203c2f7765696768743e306b696c6c5f73746f7261676504106b657973205665633c4b65793e2078204b696c6c20736f6d65206974656d732066726f6d2073746f726167652e002c2023203c7765696768743efc202d20604f28494b296020776865726520604960206c656e677468206f6620606b6579736020616e6420604b60206c656e677468206f66206f6e65206b657964202d206049602073746f726167652064656c6574696f6e732e70202d2042617365205765696768743a202e333738202a206920c2b57368202d205772697465733a204e756d626572206f66206974656d73302023203c2f7765696768743e2c6b696c6c5f70726566697808187072656669780c4b6579205f7375626b6579730c7533322c1501204b696c6c20616c6c2073746f72616765206974656d7320776974682061206b657920746861742073746172747320776974682074686520676976656e207072656669782e003d01202a2a4e4f54453a2a2a2057652072656c79206f6e2074686520526f6f74206f726967696e20746f2070726f7669646520757320746865206e756d626572206f66207375626b65797320756e64657241012074686520707265666978207765206172652072656d6f76696e6720746f2061636375726174656c792063616c63756c6174652074686520776569676874206f6620746869";
  
    #[test]
    fn decode_qr_fountain_sample() {
        let test_data_size: i64 = 4500;
        let test_data: Vec<&str> = deserialize(TEST_INPUT);
        let test_answer = parse_goblet(test_data_size as u64, CHUNK_SIZE, test_data);
        assert_eq!(test_answer, TEST_OUTPUT.to_string());
    }
}
